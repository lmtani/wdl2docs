{% extends "base.html" %}
{% from "macros/badges.html" import external_badge, count_items %}
{% from "components/stats.html" import stats_grid, stat_card, stat_card_highlighted %}
{% from "components/tabs.html" import tabs_container, tab_button, tab_content, tab_notice %}
{% from "components/docker_inventory.html" import docker_inventory_list %}
{% block title %}Docker Inventory - WDL Documentation{% endblock %}
{% block header %}Docker Inventory{% endblock %}
{% block content %}
    <div class="card">
        <h2>Overview</h2>
        {% call stats_grid() %}
            {{ stat_card(total_repositories_internal, 'Internal Repositories') }}
            {{ stat_card(total_images_internal, 'Internal Images') }}
            {{ stat_card(total_usages_internal, 'Internal Usages') }}
            {% if has_external %}
                {{ stat_card_highlighted(total_repositories_external, 'External Repositories') }}
                {{ stat_card_highlighted(total_images_external, 'External Images') }}
                {{ stat_card_highlighted(total_usages_external, 'External Usages') }}
            {% endif %}
        {% endcall %}
    </div>
    <div class="card">
        <h2>üîç Search Images</h2>
        <div class="search-container">
            <input type="text"
                   id="dockerSearchBox"
                   class="search-box"
                   placeholder="Search by image name, repository, or task..."
                   autocomplete="off">
            <span class="search-icon">üîç</span>
        </div>
    </div>
    <!-- Tabs Navigation -->
    {% if has_external %}
        {% call tabs_container() %}
            {{ tab_button('internal', 'üìÅ', 'Internal', total_repositories_internal, active=true, onclick_function='switchDockerTab') }}
            {{ tab_button('external', 'üì¶', 'External', total_repositories_external, onclick_function='switchDockerTab') }}
        {% endcall %}
    {% endif %}
    <!-- Internal Tab Content -->
    {% call tab_content('internal', active=true) %}
        {{ docker_inventory_list(repositories_internal, repo_index_offset=0, is_external=false) }}
    {% endcall %}
    <!-- External Tab Content -->
    {% if has_external %}
        {% call tab_content('external') %}
            {{ tab_notice('‚ö†Ô∏è', 'Third-Party Docker Images', 'These Docker images are used by external workflows and tasks from third-party sources.') }}
            {{ docker_inventory_list(repositories_external, repo_index_offset=1000, is_external=true) }}
        {% endcall %}
    {% endif %}
{% endblock %}
